<?php
declare(strict_types = 1);

namespace FetchMetadata;

require_once __DIR__ . '/functions.php';

$dest = headerValue('HTTP_SEC_FETCH_DEST');
$mode = headerValue('HTTP_SEC_FETCH_MODE');
$site = headerValue('HTTP_SEC_FETCH_SITE');
$user = headerValue('HTTP_SEC_FETCH_USER');
header('Content-Type: application/javascript; charset=utf-8');
?>
const setElement = function(element, value, note)
{
	if (document.getElementById(element)) {
		document.getElementById(element).innerText = value;
	}
	if (document.getElementById(element + "Note")) {
		document.getElementById(element + "Note").innerText = note;
	}
}
setElement("destScript", <?= json_encode($dest->value); ?>, <?= json_encode($dest->note); ?>);
setElement("modeScript", <?= json_encode($mode->value); ?>, <?= json_encode($mode->note); ?>);
setElement("siteScript", <?= json_encode($site->value); ?>, <?= json_encode($site->note); ?>);
setElement("userScript", <?= json_encode($user->value); ?>, <?= json_encode($user->note); ?>);
