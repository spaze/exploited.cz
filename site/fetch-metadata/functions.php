<?php
declare(strict_types = 1);

namespace FetchMetadata;

use stdClass;

function headerValue(string $header): stdClass
{
	$value = $note = '';
	if (isset($_SERVER[$header])) {
		if ($_SERVER[$header] !== '') {
			$value = $_SERVER[$header];
		} else {
			$note = 'empty string';
		}
	} else {
		$note = 'not present';
	}
	return (object)['value' => $value, 'note' => $note];
}

function headerHtml(string $header): string
{
	$key = 'HTTP_' . str_replace('-', '_', strtoupper($header));
	$headerValue = headerValue($key);
	return sprintf(
		'<code>%s</code>: %s%s',
		htmlspecialchars($header),
		$headerValue->value !== '' ? '<code>' . $headerValue->value . '</code>' : '',
		$headerValue->note !== '' ? '<em>' . $headerValue->note . '</em>' : '',
	);
}
